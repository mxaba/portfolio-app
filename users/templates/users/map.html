{% extends 'base/base.html' %}

{% block body %}
<main id="main">
    <section id="project" class="project">
        <div class="container">
            <div id="map" style="height: 100vh;"></div>

            <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />

            <script>
                var map = L.map('map').setView([0, 0], 2);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
                    maxZoom: 18
                }).addTo(map);

                var user_locations = JSON.parse('{{ user_locations|safe }}');

                for (var i = 0; i < user_locations.length; i++) {
                    var username = user_locations[i][0];
                    var latitude = user_locations[i][1];
                    var longitude = user_locations[i][2];

                    if (latitude && longitude) {
                        L.marker([latitude, longitude]).addTo(map).bindPopup(username);
                    }
                }
            </script>
        </div>
    </section>
</main>
{% endblock body %}